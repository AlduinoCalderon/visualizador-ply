import"./modulepreload-polyfill-B5Qt9EMX.js";import{m as l,C as d,n as m,o as f,p,q as r,r as w,f as c,t as g,W as u,A as L,H as b,D as h,h as a,u as x}from"./three-s0w8xr1i.js";import{O as M}from"./loaders-Cem-VtSN.js";import{O as S}from"./controls-BycUIGfH.js";class y{constructor(t="viewer-container"){this.container=document.getElementById(t)||document.body,this.currentModel=null,this.initScene(),this.initLights(),this.initControls(),this.setupEventListeners(),this.loadShelfModel()}initScene(){this.scene=new l,this.scene.background=new d(16777215),this.scene.fog=new m(16777215,1,30);const t=40,e=new f(t,40,13421772,15132390);e.position.y=-1.4,this.scene.add(e);const n=new p(t,t/2),i=new r({color:14737632,side:w,roughness:.8,metalness:.1}),o=new c(n,i);o.position.z=-40/4,o.position.y=t/4-1.4,this.scene.add(o),this.camera=new g(60,this.container.clientWidth/this.container.clientHeight,.1,1e3),this.camera.position.set(5.1,4.85,9.99),this.renderer=new u({antialias:!0}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.container.appendChild(this.renderer.domElement)}initLights(){const t=new L(4210752,.5);this.scene.add(t);const e=new b(16777215,4473924,.8);this.scene.add(e);const n=new h(16777215,1);n.position.set(1,1,2),this.scene.add(n);const i=new h(16777215,.3);i.position.set(0,1,-1),this.scene.add(i)}initControls(){this.controls=new S(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.rotateSpeed=.5,this.controls.minDistance=4,this.controls.maxDistance=20,this.controls.target.set(1.28,3.82,.12),this.controls.mouseButtons={LEFT:a.ROTATE,MIDDLE:a.DOLLY,RIGHT:a.PAN},this.controls.minPolarAngle=0,this.controls.maxPolarAngle=Math.PI,this.controls.minAzimuthAngle=-1/0,this.controls.maxAzimuthAngle=1/0,this.controls.enablePan=!0,this.controls.panSpeed=.5}setupEventListeners(){window.addEventListener("resize",()=>{this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)})}async loadShelfModel(){new M().load("./models/Shelf.obj",e=>{e.traverse(i=>{i instanceof c&&(i.material=new r({color:8421504,flatShading:!1,roughness:.7,metalness:.3}))}),e.scale.set(.005,.005,.005);const n=new x().setFromObject(e);e.position.y=-n.min.y*e.scale.y+8.529,this.scene.add(e),this.currentModel=e})}animate(){this.animationFrameId=requestAnimationFrame(this.animate.bind(this)),this.controls.update(),this.renderer.render(this.scene,this.camera)}dispose(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.controls&&this.controls.dispose(),this.currentModel=null,this.scene=null,this.camera=null,this.renderer.dispose()}}document.addEventListener("DOMContentLoaded",()=>{const s=new y("viewer-container");s.animate(),window.embeddedViewer=s});
